<!DOCTYPE HTML>
<!--

    Copyright (C) 2011 Everit Kft. (http://www.everit.org)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

            http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<html>

<head>
<meta charset="utf-8">
<title>Templating Text</title>
<link rel="icon" type="image/ico" href="http://www.everit.org/fonts/favicon.ico">

<!--    <link rel="stylesheet" type="text/css" href="common/css/base.css">-->
<link href="//www.everit.org/css/bootstrap.min.css" rel="stylesheet">
<link href="//www.everit.org/css/docs.min.css" rel="stylesheet">
<link href="//www.everit.org/css/everit.css" rel="stylesheet">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push([ '_setAccount', 'UA-15041869-4' ]);
  _gaq.push([ '_setDomainName', 'everit.org' ]);
  _gaq.push([ '_trackPageview' ]);
</script>
</head>

<body class="bs-docs-home" data-spy="scroll" data-target="#affix-nav">
  <a class="sr-only" href="#content">Skip to main content</a>
  <header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle" type="button" data-toggle="collapse"
          data-target=".bs-navbar-collapse">
          <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span
            class="icon-bar"></span> <span class="icon-bar"></span>
        </button>
        <a href="#" class="navbar-brand">Index</a>
      </div>
      <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav">
          <li><a href="https://github.com/everit-org/templating-text" target="_blank">Source</a></li>
          <li><a href="http://www.everit.org/" target="_blank">Community</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://www.everit.biz" target="_blank">Enterprise</a></li>
          <li><a href="http://everitorg.wordpress.com/" target="_blank">Blog</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="bs-docs-masthead everit-header" id="content" role="main">
    <div class="container">
      <span class="bs-docs-booticon bs-docs-booticon-lg bs-docs-booticon-outline"> <img
        class="logo" src="http://www.everit.org/fonts/sbz_e.svg" alt="E">
      </span>
      <p class="lead">Templating Text</p>
    </div>
  </div>
  <div class="container">
    <div class="col-md-10">

      <div class="bs-docs-featurette cookbook">
        <h2 id="introduction" class="bs-docs-featurette-title">Introduction</h2>
        <p>Templating implementation to generate simple text output. The origin of the solution
          is the source of MVEL. The source is modified in the way that</p>
        <ul>
          <li>the solution implements <a href="https://github.com/everit-org/templating-api">templating-api</a></li>
          <li>any expression language that is bridged with Everit <a
            href="https://github.com/everit-org/expression-api">expression-api</a> can be used
            within the templates
          </li>
          <li>have a very small binary (&lt;50k without the expression language)</li>
        </ul>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="usage" class="bs-docs-featurette-title">Usage</h2>
        <pre class="prettyprint">// Get a template from somewhere (e.g.: from a file)
String text = "Hello @{name}!";

// Instantiate any expression compiler (e.g.: MVEL)
ExpressionCompiler expressionCompiler = new MvelExpressionCompiler();

// Instantiate template compiler and pass the expression compiler
TextTemplateCompiler compiler = new TextTemplateCompiler(expressionCompiler);

// Get a classloader that can be used to compile the template if necessary
ClassLoader cl = this.getClass().getClassLoader();

// Instantiate a ParserConfiguration
ParserConfiguration configuration = new ParserConfiguration(cl);

// Compile the template
CompiledTemplate template = compiler.compile(text, configuration);

/////////////////////////////////////////////////////////////////////////
// Rendering the template
/////////////////////////////////////////////////////////////////////////

// Create a map for the variables that can be used within the template
Map&lt;String , Object&gt; vars = new HashMap&lt;#gt;();
vars.put("name", "John Doe");

// Get a Writer from somewhere (e.g.: a ResponseWriter or a StringWriter
Writer writer = new StringWriter();

// Render the template to the writer
template.render(writer, vars);

// In this example we write out the result to the standard output
System.out.println(writer.toString());</pre>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="templating_guide" class="bs-docs-featurette-title">Templating guide</h2>
        <h3 id="tempalte_context">Tempalte context</h3>
        <p>
          There is a special variable called <i>template_ctx</i>. That variable contains information
          about the ongoing render process. The <i>template_ctx</i> variable cannot be re-assigned
          or re-declared otherwise an exception will be thrown. See examples in the <i>Fragments</i>
          chapter below!
        </p>
        <h3 id="orb_tags">Orb tags</h3>
        <p>In the text of templating, several tags can be inserted. E.g.:</p>
        <pre class="prettyprint">@tagName{expression}</pre>
        <p>
          The <i>@</i> tag can be escaped with an additional <i>@</i> character. E.g.:
        </p>
        <pre class="prettyprint">@@someText</pre>
        <h3 id="expressions">Expressions</h3>
        <p>Expressions are Orb tags where there is no name. The result of the expression is
          written to the output. E.g.:</p>
        <pre class="prettyprint">@{expression}</pre>
        <p>Any expression language can be used here that is configured for the templating
          engine.</p>
        <h3 id="code_tags">Code tags</h3>
        <p>Code blocks can be used to run statements and to declare / assign variables.</p>
        <pre class="prettyprint">@code{name = 'John'}</pre>
        <h3 id="if_else_tags">If-else tags</h3>
        <p>Example:</p>
        <pre class="prettyprint">@if{foo != bar}
  Foo not a bar!
@else{bar != cat}
  Bar is not a cat!
@else{}
  Foo may be a Bar or a Cat!
@end{}</pre>
        <h3 id="foreach">Foreach</h3>
        <p>Foreach allows you to iterate through Iterable objects, Object arrays and primitive
          arrays. E.g.:</p>
        <pre class="prettyprint">@foreach{item : products} 
  - @{item.serialNumber}
@end{} </pre>
        <p>You can also do multi-iteration:</p>
        <pre class="prettyprint">@foreach{var1 : set1, var2 : set2}
  @{var1}-@{var2}
@end{}</pre>
        <p>The end tag of the foreach may contain an expression. The result of the expression
          will be rendered to the end of each iteration except the last one:</p>
        <pre class="prettyprint">@foreach{item : people}@{item.name}@end{', '}</pre>
        <h3 id="comments">Comments</h3>
        <pre class="prettyprint">@comment{
  This is a comment
}</pre>
        <p>It might happen that a } character must be inserted into a comment. Make sure that it
          is either opened with a { character within a comment or it is written as a String (within
          apostrophes or quotes). E.g.:</p>
        <pre class="prettyprint">@comment{This is my special {} comment}
@comment{This is my other special '}' comment}
@comment{'This is my third special } comment'}</pre>
        <h3 id="fragments">Fragments</h3>
        <p>It is possible to define fragments within the template:</p>
        <pre class="prettyprint">@fragment{'fragmentId'}
  This is the content of the fragment
@end{}</pre>
        <p>You can render one of the fragments of the template only by passing the fragment id
          to the render method:</p>
        <pre class="">template.render(writer, vars, fragmentId);</pre>
        <p>The fragment of a template can be rendered any time by using the template context
          variable:</p>
        <pre class="prettyprint">@{template_ctx.renderFragment('fragmentId')}</pre>
        <p>Variables can be defined that will be available during rendering the fragment. To do
          that a map must be passed as a second parameter for renderFragment method. Both the
          existing and the new variables will be accessible within the fragment:</p>
        <pre class="prettyprint">@{template_ctx.renderFragment('fragmentId', ['var1' : val1, 'var2', val2]);</pre>
        <p>Please note that the example above was written using MVEL. By using other expression
          language, the example might look different.</p>
        <p>Fragments are always rendered, even if they were not called directly. To exclude the
          fragments when they are not directly called, place an if statement within them that is
          true when rendering was called with the specific fragment id:</p>
        <pre class="prettyprint">@fragment{'myFragment'}
  @if{template_ctx.fragmentId == 'myFragment'}
    This is only rendered, when the fragment is called
  @end{}
@{end}</pre>
      </div>
      <hr class="featurette-divider">

      <div class="bs-docs-featurette cookbook">
        <h2 id="download" class="bs-docs-featurette-title">Download</h2>
        <p>
          The binaries with all of its dependencies are available at <a
            href="http://search.maven.org/#artifactdetails%7Corg.everit.templating%7Corg.everit.templating.text%7C1.0.0%7Cbundle">Maven
            Central</a>.
        </p>
      </div>
      <hr class="featurette-divider">
    </div>

    <!--        Affix-->
    <div class="col-md-2 col-sm-0 col-xs-0">
      <nav id="affix-nav">
        <ul class="nav nav-pills nav-stacked everit-affix" data-spy="affix" data-offset-top="350"
          data-offset-bottom="140">
          <li class="active"><a href="#introduction">Introduction</a></li>
          <li><a href="#usage">Usage</a></li>
          <li><a href="#templating_guide">Templating guide</a>
            <ul class="nav nav-pills nav-stacked">
              <li><a href="#tempalte_context">Tempalte context</a></li>
              <li><a href="#orb_tags">Orb tags</a></li>
              <li><a href="#expressions">Expressions</a></li>
              <li><a href="#code_tags">Code tags</a></li>
              <li><a href="#if_else_tags">If-else tags</a></li>
              <li><a href="#foreach">Foreach</a></li>
              <li><a href="#comments">Comments</a></li>
              <li><a href="#fragments">Fragments</a></li>
            </ul></li>
          <li><a href="#download">Download</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <div></div>
  <footer class="bs-docs-footer" role="contentinfo">
    <div class="container">
      <div class="bs-docs-social">
        <ul class="bs-docs-social-buttons">
          <li class="follow-btn "><a href="https://twitter.com/EveritOrg"
            class="twitter-follow-button" data-show-count="true">Follow @EveritOrg</a></li>
          <li class="tweet-btn"><a href="https://twitter.com/share"
            class="twitter-share-button" data-url="http://www.everit.org/">Tweet</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="http://www.everit.org/js/jquery-2.1.1.min.js"></script>
  <script src="http://www.everit.org/js/bootstrap.min.js"></script>
  <script src="http://www.everit.org/js/everit.js "></script>
  <script type="text/javascript">
      (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl'
            : 'http://www')
            + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <script src="http://www.everit.org/js/prettify/run_prettify.js"></script>
</body>

</html>
